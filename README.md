# Data and code for A Tale of Two Regions: Cyclical Human-Climate Interactions in the South Levant from the Chalcolithic to the Iron Age (6500 – 2200 BP).

<!-- DOI and version badges here -->
![GitHub Release](https://img.shields.io/github/v/release/UnitoAssyrianGovernance/tale-of-two-regions?include_prereleases&sort=semver&color=cyan)

**Andrea Titolo**, **Alessio Palmisano**

This repository contains the code written in R programming language to reproduce analyses and figures of the paper: Titolo, A., and Palmisano, A., TBA. A Tale of Two Regions: Cyclical Human-Climate Interactions in the South Levant from the Chalcolithic to the Iron Age (6500 – 2200 BP). Submitted to [Quaternary Science Reviews](https://www.sciencedirect.com/journal/quaternary-science-reviews) Journal.

The present repository will also be archived on Zenodo (TBA).

## Contents

> Note: the main dataset of archaeological sites is not incorporated in this repository, but it is already published and available on Zenodo at: https://doi.org/10.5281/zenodo.15111732. There is no need to download the dataset, as the scripts are designed to do so on execution (if the file is not already present).

- [Code](./code):
  - **R code** divided in five main scripts and one functions script, used to run the analysis.
    - The scripts are named in the order they are supposed to be run to generate the correct outcome:
    - `01_radiocarbon.R` → this script generates SPDs, test them against logistic and exponential null models, and creates Figures 3, 4, and 5 of the paper.
    - `02_settlements.R` → this scripts carries out the aoristic analyses on the archaeological proxies and creates Figure 6 of the paper.
    - `03_paleoclimate.R` → this scripts calculate z-scores from the paleoclimate proxies and plot them with the SPDs generated by the 01 script, and it creates Figure 7 of the paper.
    - `04_paleoclimate_correlations.R` → this script carries out a running correlation between paleoclimate data and archaeodemographic proxies, and creates Figure 8 of the paper.
    - `05_density_maps.R` → script that calculate the spatial KDE for archaeological sites by period, and it creates Figure 9 of the paper.
  - **Functions**, in the [functions subfolder](./code/functions):
    - Series of custom functions used throughout the analyses. Single functions are named as `function_name.R`, while smaller functions and related wrapper functions are grouped into a single R file as e.g. `simulation_functions.R`.
- [Data](./data):
    - Data folder containing:
        - Raw folder, for raw files used by the scripts:
            - a series of .csv files, each for one paleoclimate proxy.
            - a .tiff file for a Digital Elevation Model (DEM) to use in the `05_density_maps.R` script (due to file size limitations, this needs to be downloaded from [Fighsare](https://figshare.com/s/db71beb03c49f0e10929) - see [REPRODUCIBILITY](/REPRODUCIBILITY.md)).
        - Processed folder, for data processed outside or within the scripts:
            - a .csv containing the outcome of the `03_paleoclimate.R` script.
            - a .gpkg file containing radiocarbon data to use in the `01_radiocarbon.R` script.
        - a .gpkg containing polygon files for the project area
- [Output](./output):
    - Output folder containing:
        - csv: folder containing a series of csv for outcomes of correlations (used in tables in the paper)
        - png: folder containing the figures produced by the R scripts.
        - rda: folder containing .RData files with the variables produced by the scripts, so that they can be loaded instead of re-running all the analyses, if necessary.
            - Note that due to size limitations, the output of `01_radiocarbon.R` script needs to be downloaded from [Figshare](https://figshare.com/s/61729c5d2acfb1f2d6a8) - see [REPRODUCIBILITY](/REPRODUCIBILITY.md). 
- [renv](./renv):
    - {[renv](https://rstudio.github.io/renv/)} settings folder, see the [REPRODUCIBILITY.md](/REPRODUCIBILITY.md) for more details.
- renv.lock: {renv} lock file, see the [REPRODUCIBILITY.md](/REPRODUCIBILITY.md) for more details.
- .Rprofile: check the presence of the `use_renv.txt` file and starts {renv}.
- use_renv.txt: dummy file - if present the .RProfile will load {renv}.
- [REPRODUCIBILITY.md](REPRODUCIBILITY.md): instructions to reproduce the analysis
- [CHANGELOG.md](CHANGELOG.md): changelog file.

## Repository tree

```
├── code
│   ├── functions
│   ├── 01_radiocarbon.R
│   ├── 02_settlements.R
│   ├── 03_paleoclimate.R
│   ├── 04_paleoclimate_correlations.R
│   └── 05_density_maps.R
├── data
│   ├── processed
│   ├── raw
│   └── context_dataset.gpkg
├── output
│   ├── csv
│   ├── png
│   └── rda
├── renv
├── .Rprofile
├── CHANGELOG.md
├── README.md
├── renv.lock
├── use_renv.txt
└── REPRODUCIBILITY.md
```

## Licences

Dataset: [CC-BY 4.0](http://creativecommons.org/licenses/by/4.0/)

Code: [MIT](http://opensource.org/licenses/MIT) year: 2025, copyright holder: Andrea Titolo, Alessio Palmisano
